# AI 에이전트 제작 기획서 (CLI · PDF 기반 백엔드 태스크 추출)

## 0. Executive Summary
- **문제:** 화면 설계/사용자 흐름 중심의 PDF 기획서에서 백엔드 개발자가 해야 할 일을 사람이 직접 분해·정리하는 데 많은 시간 소요  
- **해결:** PDF(텍스트+이미지)에서 요구사항을 자동 추출 → 상위/하위 태스크로 구조화 → **상위 태스크별 Markdown 파일**로 산출  
- **효과:** 개발 착수 전 기획서 이해 및 작업 분해 시간을 50% 이상 단축, Claude Code를 통한 반자동 구현 가속화

---

## 1. 목표(Goals) & 성공지표(KPIs)
### 1.1 목표
1. PDF 기획서에서 **백엔드 개발 업무 자동 추출**
2. 상위/하위 구조화(예: 1, 1.1, 1.2 → 2, 2.1, 2.2 …)
3. **상위 태스크별 Markdown 파일 자동 생성**
4. Claude Code가 인식 가능한 **구조적 한국어 작업 문서** 산출

### 1.2 성공지표
- 생성된 태스크의 정확도 및 포괄성: ≥ 4.0/5.0  
- 수동 수정 소요시간: 기존 대비 50% 이상 단축  
- 누락 이슈(기능 미포함율): ≤ 10%  
- 개발자 사용 만족도: ≥ 4.0/5.0

---

## 2. 범위(Scope)
- **입력:** PDF(텍스트/이미지 포함, 화면 설계 + 사용자 흐름)
- **출력:** 상위 태스크별 Markdown 파일 (예: `1_인증.md`, `2_결제.md`, …)
- **환경:** CLI (Mac/Linux/Windows)
- **스택 고려:** NestJS/Prisma 문맥 반영

---

## 3. 요구사항(Requirements)
### 3.1 기능 요구사항
- PDF 텍스트/이미지 내용 추출
- OCR 기반 이미지 내 텍스트 인식
- 기능별 요구사항 식별 및 그룹화
- 상위/하위 태스크 분리 및 상세화
- 상위 태스크 단위 Markdown 파일 생성
- CLI를 통한 간단한 입력/출력 지원
- 로그/에러/진행률 표시

### 3.2 비기능 요구사항
- PDF 처리 속도: 50p 기준 5분 이내
- 안정적 OCR/LLM 호출
- 결과 재현성 확보
- LLM/토큰 사용량 로깅

---

## 4. 시스템 아키텍처 개요
```
[CLI]
  └─ Orchestrator
       ├─ PDF Extractor (텍스트/이미지)
       ├─ OCR Engine (Tesseract)
       ├─ Preprocessor (정규화/섹션 구분)
       ├─ LLM Planner (상위 기능 식별)
       ├─ LLM TaskWriter (하위 태스크 세분화)
       ├─ FileSplitter (상위 태스크별 파일 분리)
       └─ Reporter (로그/진행/비용)
```

---

## 5. 모듈 설계
| 모듈명 | 주요 기능 |
|--------|------------|
| **PDF Extractor** | 텍스트, 헤딩, 표, 좌표 기반 문단 추출 |
| **OCR Engine** | 이미지 내 라벨/텍스트 인식 |
| **Preprocessor** | 페이지 헤더·푸터 제거, 섹션화 |
| **LLM Planner** | 기능별 그룹(인증, 결제, 알림 등) 분류 |
| **LLM TaskWriter** | 상·하위 태스크 구조 및 구현지시 작성 |
| **FileSplitter** | 각 상위 태스크별로 Markdown 파일 생성 |
| **Reporter** | 로그, 비용, 처리 시간 리포트 출력 |

---

## 6. 프롬프트 설계 요약
- **역할:** “시니어 백엔드 아키텍트”  
- **목표:** 주어진 PDF에서 **상위 기능 → 하위 개발 작업** 도출  
- **지시사항:**  
  - NestJS/Prisma 문맥 반영  
  - 문서 기반 추론, 가정 시 “가정 필요” 표기  
  - 출력은 한국어 Markdown  
- **출력 규칙:**  
  - 하나의 프롬프트 → 하나의 상위 태스크 블록  
  - 각 블록을 개별 Markdown 파일로 분리 저장  

---

## 7. Markdown 산출 구조 (상위 태스크별 파일 분리)

### 파일명 규칙
```
{index}_{기능명}.md
예: 1_인증.md, 2_결제.md, 3_게시판.md
```

### 각 파일의 구조 예시
```markdown
# {기능명} — 상위 태스크 {index}

## 상위 태스크 개요
- **설명:** {기능의 목적 및 전체 요약}
- **모듈/영역:** {예: AuthModule, PaymentModule}
- **관련 엔티티:** {예: User, PaymentHistory}
- **선행 조건:** {다른 모듈 의존 관계}
- **참고:** PDF 원문 {p.12–15}

---

## 하위 태스크 목록

### {index}.1 {하위 태스크명}
- **목적:** {해당 기능의 역할}
- **엔드포인트:** `POST /api/...`
- **데이터 모델:** `User { id, email, ... }`
- **로직 요약:** {핵심 로직 1–3줄}
- **권한/보안:** {JWT/RoleGuard 등}
- **예외:** {에러 코드, 처리 방식}
- **테스트 포인트:** {기본 시나리오 요약}

### {index}.2 {하위 태스크명}
...
```

**출력 정책**
- Markdown 파일은 상위 태스크 기준으로 분리되어 생성  
- CLI 실행 후, 출력 폴더에 `{index}_{기능명}.md` 형태로 저장  
- 각 파일은 독립적으로 Claude Code 등에서 인식 가능하도록 구성  

---

## 8. CLI 사용 시나리오
```bash
# 기본 실행
pdf2tasks analyze ./specs/app-v1.pdf --out ./out/

# 결과
./out/
  ├─ 1_인증.md
  ├─ 2_결제.md
  ├─ 3_알림.md
  └─ report.log
```

- **필수 인자:**
  - 입력 PDF 경로
  - 출력 디렉토리 경로

- **출력:**  
  각 상위 태스크별 Markdown 파일  
  + 요약 로그(`report.log`): 파일 생성 개수, 처리 시간, 오류 내역

---

## 9. 품질 및 검증 계획
- 10개 표준 기획서 샘플 테스트 (UI/Flow 다양성 확보)
- 포괄성/정확성 평가 (리드 개발자 리뷰)
- Markdown 분리 결과의 Claude Code 호환성 확인
- 프롬프트 안정성 테스트(복잡한 플로우, 다단계 UI 포함 문서)

---

## 10. 구현 일정 (4주)
| 주차 | 주요 목표 |
|------|------------|
| **1주차** | CLI 기본 구조, PDF 추출 & OCR |
| **2주차** | LLM Planner / TaskWriter 개발 |
| **3주차** | Markdown 분리(FileSplitter) 및 포맷 확정 |
| **4주차** | 테스트·튜닝·샘플 파일럿·배포 |

---

## 11. 향후 확장
- **NestJS 코드 생성기 연결** (AuthModule, CRUD 스캐폴드)
- **Notion/Jira 자동 등록**
- **팀 피드백 기반 룰 개선 및 재학습**
- **OpenAPI 스펙/ERD 자동 생성 파이프라인**

---

## 12. 예시 출력 디렉토리
```
out/
 ├─ 1_인증.md
 ├─ 2_결제.md
 ├─ 3_게시판.md
 ├─ 4_알림.md
 └─ report.log
```
